name: Swift
on:
      push:
        branches: [main]
jobs: 
      build:
        runs-on: [macos-latest]
        env: 
          XC_VERSION: ${{ '12.1.0' }}
          XC_PROJECT: ${{ 'GitAction/GitAction.xcworkspace' }}
          XC_SCHEME: ${{ 'GitAction' }}

        steps:  
        - uses: actions/checkout@v2
    
        - name: pr close if test failed
          uses: actions/github-script@v3
          with:
                github-token: ${{secrets.GITHUB_TOKEN}}
                script: |
                  const ref = "${{github.ref}}"
                  const pull_number = github.context.pull_request.number
                  console.log(github.context.pull_request)      
                  
                  await github.pulls.createReview({
                    ...context.repo,
                    pull_number,
                    body: "ðŸ‘‹ í…ŒìŠ¤íŠ¸ì½”ë“œê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",
                    event: "REQUEST_CHANGES"
                  })
